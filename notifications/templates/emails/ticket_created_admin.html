{% extends "emails/base_email.html" %}

{% block content %}
<h2>Â¡Hola {{ usuario.first_name|default:usuario.email }}! ğŸ‘¨â€ğŸ’¼</h2>

<p>Se ha creado un nuevo ticket en el sistema que requiere tu supervisiÃ³n.</p>

<div class="ticket-info">
    <h3>ğŸ“Š Nuevo Ticket Creado</h3>
    
    <div class="info-row">
        <span class="info-label">NÃºmero:</span>
        <span class="info-value"><strong>#{{ ticket.pk }}</strong></span>
    </div>
    
    <div class="info-row">
        <span class="info-label">TÃ­tulo:</span>
        <span class="info-value">{{ ticket.titulo }}</span>
    </div>
    
    <div class="info-row">
        <span class="info-label">Estado:</span>
        <span class="info-value">
            <span class="status-badge status-{{ ticket.estado.codigo }}">{{ ticket.estado.nombre }}</span>
        </span>
    </div>
    
    <div class="info-row">
        <span class="info-label">Cliente:</span>
        <span class="info-value">
            {{ ticket.cliente.first_name }} {{ ticket.cliente.last_name }}
            <br><small style="color: #666;">{{ ticket.cliente.email }} | {{ ticket.cliente.document }}</small>
        </span>
    </div>
    
    {% if ticket.cliente.number %}
    <div class="info-row">
        <span class="info-label">TelÃ©fono:</span>
        <span class="info-value">{{ ticket.cliente.number }}</span>
    </div>
    {% endif %}
    
    <div class="info-row">
        <span class="info-label">Fecha de creaciÃ³n:</span>
        <span class="info-value">{{ ticket.fecha|date:"d/m/Y H:i" }}</span>
    </div>
    
    {% if ticket.equipo %}
    <div class="info-row">
        <span class="info-label">Equipo:</span>
        <span class="info-value">{{ ticket.equipo }}</span>
    </div>
    {% endif %}
    
    {% if ticket.tecnico %}
    <div class="info-row">
        <span class="info-label">TÃ©cnico asignado:</span>
        <span class="info-value">{{ ticket.tecnico.first_name }} {{ ticket.tecnico.last_name }}</span>
    </div>
    {% else %}
    <div class="info-row">
        <span class="info-label">TÃ©cnico asignado:</span>
        <span class="info-value" style="color: #dc3545;"><strong>âš ï¸ Sin asignar</strong></span>
    </div>
    {% endif %}
</div>

{% if ticket.descripcion %}
<div class="description">
    <h4>ğŸ“ DescripciÃ³n del problema:</h4>
    <p>{{ ticket.descripcion|linebreaks }}</p>
</div>
{% endif %}

<div style="background-color: #F9FAFB; padding: 15px; border-radius: 5px; margin: 20px 0; border-left: 4px solid #0d9488;">
    <h4 style="margin-top: 0; color: #1F5E89;">ğŸ“ˆ Resumen administrativo:</h4>
    <ul style="margin-bottom: 0;">
        <li><strong>ID del ticket:</strong> #{{ ticket.pk }}</li>
        <li><strong>Cliente:</strong> {{ ticket.cliente.first_name }} {{ ticket.cliente.last_name }}</li>
        <li><strong>Estado actual:</strong> {{ ticket.estado.nombre }}</li>
        <li><strong>Fecha de creaciÃ³n:</strong> {{ ticket.fecha|date:"d/m/Y H:i" }}</li>
        {% if ticket.tecnico %}
        <li><strong>TÃ©cnico asignado:</strong> {{ ticket.tecnico.first_name }} {{ ticket.tecnico.last_name }}</li>
        {% else %}
        <li><strong>TÃ©cnico asignado:</strong> <span style="color: #dc3545;">Pendiente de asignaciÃ³n</span></li>
        {% endif %}
    </ul>
</div>

{% if not ticket.tecnico %}
<div style="background-color: #F9FAFB; padding: 15px; border-radius: 5px; margin: 20px 0; border-left: 4px solid #dc3545;">
    <h4 style="margin-top: 0; color: #dc3545;">âš ï¸ AcciÃ³n requerida:</h4>
    <p style="margin-bottom: 0;">Este ticket aÃºn no tiene un tÃ©cnico asignado. Considera asignar un tÃ©cnico disponible para dar seguimiento oportuno al cliente.</p>
</div>
{% endif %}

<p>Como administrador, puedes monitorear el progreso de este ticket desde el panel de administraciÃ³n.</p>

<p>Â¡Gracias por tu supervisiÃ³n! ğŸ“Š</p>
{% endblock %}
